<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîî PC-Master: –ú–æ–Ω—ñ—Ç–æ—Ä –∑–∞—è–≤–æ–∫ Online</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .status-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease;
        }
        
        .status-card:hover {
            transform: translateY(-5px);
        }
        
        .status-card h3 {
            font-size: 1.2em;
            margin-bottom: 15px;
            opacity: 0.9;
        }
        
        .status-value {
            font-size: 2.5em;
            font-weight: bold;
            color: #ffd700;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .controls {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .controls h2 {
            margin-bottom: 20px;
            text-align: center;
        }
        
        .control-row {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.9em;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .btn.success {
            background: linear-gradient(45deg, #00b894, #00a085);
        }
        
        .btn.primary {
            background: linear-gradient(45deg, #0984e3, #6c5ce7);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .notifications-panel {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255,255,255,0.2);
            max-height: 600px;
            overflow-y: auto;
        }
        
        .notification-item {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 4px solid #ffd700;
            animation: slideIn 0.5s ease;
            transition: all 0.3s ease;
        }
        
        .notification-item:hover {
            background: rgba(255,255,255,0.15);
        }
        
        .notification-item.urgent {
            border-left-color: #ff6b6b;
            background: rgba(255, 107, 107, 0.2);
            animation: pulse 2s infinite;
        }
        
        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .notification-time {
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .notification-content {
            font-weight: bold;
            line-height: 1.4;
        }
        
        .notification-details {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255,255,255,0.2);
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.02); opacity: 0.9; }
        }
        
        .connection-status {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            z-index: 1000;
            transition: all 0.3s ease;
        }
        
        .connection-status.connected {
            background: linear-gradient(45deg, #00b894, #00a085);
        }
        
        .connection-status.disconnected {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
        }
        
        .sound-test {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .emergency-alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            z-index: 9999;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            animation: emergencyPulse 1s infinite;
            max-width: 90vw;
        }
        
        @keyframes emergencyPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
        }
        
        .close-alert {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .control-row {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="connection-status" id="connectionStatus">üîÑ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</div>
    
    <div class="container">
        <div class="header">
            <h1>üîî PC-Master: –ú–æ–Ω—ñ—Ç–æ—Ä –∑–∞—è–≤–æ–∫</h1>
            <p>–û–Ω–ª–∞–π–Ω —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∑–∞—è–≤–æ–∫ —Å push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏</p>
        </div>
        
        <div class="status-grid">
            <div class="status-card">
                <h3>üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h3>
                <div class="status-value" id="systemStatus">üü° –°—Ç–∞—Ä—Ç</div>
            </div>
            <div class="status-card">
                <h3>üìà –ó–∞—è–≤–æ–∫ —Å–µ–≥–æ–¥–Ω—è</h3>
                <div class="status-value" id="todayCount">0</div>
            </div>
            <div class="status-card">
                <h3>‚è∞ –ü–æ—Å–ª–µ–¥–Ω—è—è –∑–∞—è–≤–∫–∞</h3>
                <div class="status-value" id="lastRequest">‚Äî</div>
            </div>
            <div class="status-card">
                <h3>üë• –ê–∫—Ç–∏–≤–Ω—ã—Ö –º–æ–Ω–∏—Ç–æ—Ä–æ–≤</h3>
                <div class="status-value" id="activeMonitors">1</div>
            </div>
        </div>
        
        <div class="controls">
            <h2>‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π</h2>
            
            <div class="sound-test">
                <p style="margin-bottom: 15px;">üîä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–≤—É–∫–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:</p>
                <div class="control-row">
                    <button class="btn primary" id="testPushBtn">üì± –¢–µ—Å—Ç Push</button>
                    <button class="btn primary" id="testSoundBtn">üéµ –¢–µ—Å—Ç –∑–≤—É–∫–∞</button>
                    <button class="btn primary" id="testFullBtn">üö® –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç</button>
                </div>
            </div>
            
            <div class="control-row">
                <button class="btn success" id="enableNotificationsBtn">üîî –í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</button>
                <button class="btn" id="subscribeBtn">üì± –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ Push</button>
                <button class="btn primary" id="refreshBtn">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
            </div>
        </div>
        
        <div class="notifications-panel">
            <h2>üìã –ñ—É—Ä–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h2>
            <div id="notificationsList">
                <div class="notification-item">
                    <div class="notification-header">
                        <span class="notification-time">–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—â–µ–Ω–∞</span>
                        <span>‚úÖ</span>
                    </div>
                    <div class="notification-content">–ú–æ–Ω–∏—Ç–æ—Ä –∑–∞—è–≤–æ–∫ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class OnlineRequestMonitor {
            constructor() {
                this.notifications = [];
                this.todayCount = 0;
                this.lastRequestTime = null;
                this.isConnected = false;
                this.audioContext = null;
                this.notificationSupported = 'Notification' in window;
                
                this.init();
            }
            
            async init() {
                this.setupEventListeners();
                await this.initializePushNotifications();
                this.updateConnectionStatus('connected');
                this.startPeriodicCheck();
            }
            
            setupEventListeners() {
                document.getElementById('testPushBtn').addEventListener('click', () => this.testPushNotification());
                document.getElementById('testSoundBtn').addEventListener('click', () => this.testSoundNotification());
                document.getElementById('testFullBtn').addEventListener('click', () => this.testFullNotification());
                document.getElementById('enableNotificationsBtn').addEventListener('click', () => this.requestNotificationPermission());
                document.getElementById('subscribeBtn').addEventListener('click', () => this.subscribeToPush());
                document.getElementById('refreshBtn').addEventListener('click', () => this.refresh());
            }
            
            async initializePushNotifications() {
                if (!this.notificationSupported) {
                    this.addNotification('‚ùå –ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è', 'error');
                    return;
                }
                
                if (Notification.permission === 'granted') {
                    this.addNotification('‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω—ã');
                    await this.subscribeToPush();
                } else if (Notification.permission === 'default') {
                    this.addNotification('üîî –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è');
                }
            }
            
            async requestNotificationPermission() {
                if (!this.notificationSupported) {
                    alert('–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è');
                    return;
                }
                
                try {
                    const permission = await Notification.requestPermission();
                    if (permission === 'granted') {
                        this.addNotification('‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—É—á–µ–Ω–æ');
                        await this.subscribeToPush();
                    } else {
                        this.addNotification('‚ùå –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ', 'error');
                    }
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π:', error);
                    this.addNotification('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π', 'error');
                }
            }
            
            async subscribeToPush() {
                if (!('serviceWorker' in navigator) || !('PushManager' in window)) {
                    this.addNotification('‚ùå Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è', 'error');
                    return;
                }
                
                try {
                    // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º Service Worker
                    const registration = await navigator.serviceWorker.register('/sw.js');
                    this.addNotification('‚úÖ Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω');
                    
                    // –ü–æ–ª—É—á–∞–µ–º VAPID –∫–ª—é—á
                    const response = await fetch('/.netlify/functions/push-notifications/vapid-public-key');
                    const { publicKey } = await response.json();
                    
                    // –°–æ–∑–¥–∞–µ–º –ø–æ–¥–ø–∏—Å–∫—É
                    const subscription = await registration.pushManager.subscribe({
                        userVisibleOnly: true,
                        applicationServerKey: this.urlBase64ToUint8Array(publicKey)
                    });
                    
                    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                    await fetch('/.netlify/functions/push-notifications/subscribe', {\n                        method: 'POST',\n                        headers: { 'Content-Type': 'application/json' },\n                        body: JSON.stringify(subscription)\n                    });\n                    \n                    this.addNotification('üéâ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã!');\n                    document.getElementById('systemStatus').textContent = 'üü¢ –ê–∫—Ç–∏–≤–µ–Ω';\n                    \n                } catch (error) {\n                    console.error('–û—à–∏–±–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ push:', error);\n                    this.addNotification('‚ùå –û—à–∏–±–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π', 'error');\n                }\n            }\n            \n            async testPushNotification() {\n                try {\n                    const response = await fetch('/.netlify/functions/push-notifications/send', {\n                        method: 'POST',\n                        headers: { 'Content-Type': 'application/json' },\n                        body: JSON.stringify({\n                            title: 'üß™ –¢–µ—Å—Ç–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ',\n                            body: '–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ PC-Master',\n                            data: { type: 'test' }\n                        })\n                    });\n                    \n                    if (response.ok) {\n                        this.addNotification('‚úÖ –¢–µ—Å—Ç–æ–≤–æ–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ');\n                    } else {\n                        throw new Error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏');\n                    }\n                } catch (error) {\n                    console.error('–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ push:', error);\n                    this.addNotification('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ push', 'error');\n                }\n            }\n            \n            testSoundNotification() {\n                this.playAlertSound();\n                this.addNotification('üéµ –¢–µ—Å—Ç–æ–≤—ã–π –∑–≤—É–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω');\n            }\n            \n            testFullNotification() {\n                this.simulateNewRequest({\n                    name: '–¢–µ—Å—Ç–æ–≤—ã–π –ö–ª–∏–µ–Ω—Ç',\n                    phone: '+38 (097) 123-45-67',\n                    service: 'üíª –ü–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ Windows',\n                    message: '–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º—ã'\n                });\n            }\n            \n            simulateNewRequest(requestData) {\n                this.todayCount++;\n                this.lastRequestTime = new Date();\n                \n                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É\n                document.getElementById('todayCount').textContent = this.todayCount;\n                document.getElementById('lastRequest').textContent = \n                    this.lastRequestTime.toLocaleTimeString('uk-UA');\n                \n                // –ó–≤—É–∫–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\n                this.playAlertSound();\n                \n                // –í–∏–∑—É–∞–ª—å–Ω—ã–π –∞–ª–µ—Ä—Ç\n                this.showEmergencyAlert(requestData);\n                \n                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∂—É—Ä–Ω–∞–ª\n                this.addNotification(\n                    `üìû –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞: ${requestData.name} | ${requestData.service}`,\n                    'urgent',\n                    requestData\n                );\n                \n                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ\n                this.sendPushNotification({\n                    title: 'üö® –ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ PC-Master!',\n                    body: `${requestData.name}\\n${requestData.phone}\\n${requestData.service}`,\n                    data: requestData\n                });\n            }\n            \n            showEmergencyAlert(requestData) {\n                const alert = document.createElement('div');\n                alert.className = 'emergency-alert';\n                alert.innerHTML = `\n                    <button class=\"close-alert\" onclick=\"this.parentElement.remove()\">&times;</button>\n                    <div>üö® –ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê!</div>\n                    <div style=\"margin: 15px 0; font-size: 1.2em;\">\n                        <div>üë§ ${requestData.name}</div>\n                        <div>üìû ${requestData.phone}</div>\n                        <div>üõ†Ô∏è ${requestData.service}</div>\n                    </div>\n                    <div style=\"font-size: 0.9em; opacity: 0.9;\">–ö–ª–∏–∫–Ω–∏—Ç–µ —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å</div>\n                `;\n                \n                // –ú–∏–≥–∞–Ω–∏–µ —Ñ–æ–Ω–∞\n                let blinkCount = 0;\n                const blinkInterval = setInterval(() => {\n                    document.body.style.backgroundColor = blinkCount % 2 === 0 ? 'rgba(255, 68, 68, 0.3)' : '';\n                    blinkCount++;\n                    if (blinkCount > 8) {\n                        clearInterval(blinkInterval);\n                        document.body.style.backgroundColor = '';\n                    }\n                }, 300);\n                \n                document.body.appendChild(alert);\n                \n                // –ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 15 —Å–µ–∫—É–Ω–¥\n                setTimeout(() => {\n                    if (alert.parentNode) {\n                        alert.remove();\n                    }\n                }, 15000);\n                \n                // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É\n                alert.addEventListener('click', () => alert.remove());\n            }\n            \n            playAlertSound() {\n                if (!this.audioContext) {\n                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();\n                }\n                \n                // –°–æ–∑–¥–∞–µ–º –Ω–∞—Å—Ç–æ–π—á–∏–≤—ã–π –∑–≤—É–∫ —Å–∏—Ä–µ–Ω—ã\n                const oscillator = this.audioContext.createOscillator();\n                const gainNode = this.audioContext.createGain();\n                \n                oscillator.connect(gainNode);\n                gainNode.connect(this.audioContext.destination);\n                \n                // –°–∏—Ä–µ–Ω–∞: –º–æ–¥—É–ª—è—Ü–∏—è —á–∞—Å—Ç–æ—Ç—ã\n                oscillator.frequency.setValueAtTime(800, this.audioContext.currentTime);\n                oscillator.frequency.exponentialRampToValueAtTime(400, this.audioContext.currentTime + 0.5);\n                oscillator.frequency.exponentialRampToValueAtTime(800, this.audioContext.currentTime + 1);\n                \n                gainNode.gain.setValueAtTime(0.7, this.audioContext.currentTime);\n                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 2);\n                \n                oscillator.start();\n                oscillator.stop(this.audioContext.currentTime + 2);\n                \n                // –ü–æ–≤—Ç–æ—Ä—è–µ–º 3 —Ä–∞–∑–∞\n                setTimeout(() => this.playAlertSound(), 2500);\n                setTimeout(() => this.playAlertSound(), 5000);\n            }\n            \n            async sendPushNotification(data) {\n                try {\n                    await fetch('/.netlify/functions/push-notifications/send', {\n                        method: 'POST',\n                        headers: { 'Content-Type': 'application/json' },\n                        body: JSON.stringify(data)\n                    });\n                } catch (error) {\n                    console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ push:', error);\n                }\n            }\n            \n            addNotification(message, type = 'info', details = null) {\n                const time = new Date().toLocaleTimeString('uk-UA');\n                const notification = document.createElement('div');\n                notification.className = `notification-item ${type === 'urgent' ? 'urgent' : ''}`;\n                \n                let detailsHtml = '';\n                if (details) {\n                    detailsHtml = `\n                        <div class=\"notification-details\">\n                            üì± ${details.phone || '–ù–µ —É–∫–∞–∑–∞–Ω'}<br>\n                            üí¨ ${details.message || '–ë–µ–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è'}\n                        </div>\n                    `;\n                }\n                \n                notification.innerHTML = `\n                    <div class=\"notification-header\">\n                        <span class=\"notification-time\">${time}</span>\n                        <span>${type === 'error' ? '‚ùå' : type === 'urgent' ? 'üö®' : '‚úÖ'}</span>\n                    </div>\n                    <div class=\"notification-content\">${message}</div>\n                    ${detailsHtml}\n                `;\n                \n                const list = document.getElementById('notificationsList');\n                list.insertBefore(notification, list.firstChild);\n                \n                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π\n                const notifications = list.children;\n                if (notifications.length > 50) {\n                    list.removeChild(notifications[notifications.length - 1]);\n                }\n            }\n            \n            updateConnectionStatus(status) {\n                const statusElement = document.getElementById('connectionStatus');\n                if (status === 'connected') {\n                    statusElement.textContent = 'üü¢ –ü–æ–¥–∫–ª—é—á–µ–Ω';\n                    statusElement.className = 'connection-status connected';\n                    this.isConnected = true;\n                } else {\n                    statusElement.textContent = 'üî¥ –û—Ç–∫–ª—é—á–µ–Ω';\n                    statusElement.className = 'connection-status disconnected';\n                    this.isConnected = false;\n                }\n            }\n            \n            startPeriodicCheck() {\n                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥\n                setInterval(async () => {\n                    try {\n                        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É API –Ω–∞ –Ω–æ–≤—ã–µ –∑–∞—è–≤–∫–∏\n                        // const response = await fetch('/.netlify/functions/check-requests');\n                        console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–æ–∫...');\n                    } catch (error) {\n                        console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞—è–≤–æ–∫:', error);\n                        this.updateConnectionStatus('disconnected');\n                    }\n                }, 30000);\n            }\n            \n            refresh() {\n                location.reload();\n            }\n            \n            urlBase64ToUint8Array(base64String) {\n                const padding = '='.repeat((4 - base64String.length % 4) % 4);\n                const base64 = (base64String + padding)\n                    .replace(/\\-/g, '+')\n                    .replace(/_/g, '/');\n            \n                const rawData = window.atob(base64);\n                const outputArray = new Uint8Array(rawData.length);\n            \n                for (let i = 0; i < rawData.length; ++i) {\n                    outputArray[i] = rawData.charCodeAt(i);\n                }\n                return outputArray;\n            }\n        }\n        \n        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã\n        document.addEventListener('DOMContentLoaded', () => {\n            window.monitor = new OnlineRequestMonitor();\n        });\n        \n        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã\n        window.addEventListener('beforeunload', (e) => {\n            e.preventDefault();\n            e.returnValue = '–í—ã –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–∫—Ä—ã—Ç—å –º–æ–Ω–∏—Ç–æ—Ä –∑–∞—è–≤–æ–∫?';\n        });\n    </script>\n</body>\n</html>"